language: go

sudo: required
services:
  - docker

go:
 - 1.3
 - 1.4
 - 1.5
 - 1.6
 - tip

env:
 - SCENARIO=false
 - SCENARIO=true

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y iputils-arping bridge-utils lv

install:
  - sudo wget https://raw.github.com/jpetazzo/pipework/master/pipework -O /usr/local/bin/pipework
  - sudo chmod 755 /usr/local/bin/pipework
  - sudo -H pip --quiet install -r test/pip-requires.txt
  - go get github.com/stretchr/testify/assert
  - go get github.com/osrg/gobgp/gobgpd
  - go get github.com/osrg/gobgp/gobgp

matrix:
  exclude:
    - go: 1.3
      env: SCENARIO=true
    - go: 1.4
      env: SCENARIO=true
    - go: 1.5
      env: SCENARIO=true
    - go: tip
      env: SCENARIO=true

script:
 - bash test/scenario_test/ci-scripts/travis-build-script.sh $SCENARIO

notifications:
 slack:
  secure: KzuC9kytzS7wTlfj4MqSg8EpqXfJRMbo59dAVTA3w587achnVCS3vhUenWuhMCiWk7+6DVWwNpwzn2+A0S6RwMFMpKAU6Ij6K9sxEOgqBGuMN8w1//w+uJTryzsnebEIhInGt2kKfqz4Wx3QQqW5gVhI+8s+c5M0iXxFtN4soVk=
